# --- Podcast
podcast.calebely.net {
	redir https://podcasters.spotify.com/pod/show/cely717 303
}

# -- Notes
notes.calebely.net {
	header -server
	encode gzip

	log {
		output file /var/log/caddy/ct-notes.log
		format json
	}

	# Handle static files specially
	file_server /static/ browse {
		root /var/www/notes
	}

	root /var/www/notes/dist
	handle_path * {
		try_files {path} {path}.html
		file_server
	}

	# redir /dist /dist/
	# handle_path /dist/* {
	# 	root * /var/www/notes/dist
	# 	 try_files {path} {path}.html
	# 	file_server
	# }

	# Serve the site from the generated notes directory
	# file_server {
	# 	root /var/www/notes/dist
	# 	try_files {path}.html {path}
	# }
}
